var Modal=function(){function t(t){this.props=t,this.className=""}return t.prototype.getJQueryElement=function(){return this.HTMLButtons=this.renderButtons(),this.HTMLActions=this.renderActions(),this.HTMLMain=this.renderMain(),this.HTMLHeader=this.renderHeader(),this.HTMLCloseButton=this.renderCloseButton(),this.HTMLModal=this.renderModal(),this.props.fullScreen&&(this.HTMLModal=this.renderFullScreenModal()),$($.parseHTML(this.HTMLModal))},t.prototype.renderFullScreenModal=function(){return'<div class="modal__fullscreen">\n      '+this.HTMLModal+"\n    </div>"},t.prototype.renderModal=function(){return this.className=this.parseClass(this.props),this.props.fullScreen?this.props.isIEBrowser?this.HTMLCloseButton+'\n          <div class="modal--ie '+this.className+' js-modal">\n            '+this.HTMLHeader+"\n            "+this.HTMLMain+"\n          </div>":this.HTMLCloseButton+'\n          <div class="multi-modal__table">\n            <div class="multi-modal__table-cell">\n              <div class="modal '+this.className+' js-modal">\n                '+this.HTMLHeader+"\n                "+this.HTMLMain+"\n              </div>\n            </div>\n          </div>":this.props.isIEBrowser?'<div class="modal--ie '+this.className+' js-modal">\n          '+this.HTMLCloseButton+"\n          "+this.HTMLHeader+"\n          "+this.HTMLMain+"\n        </div>":'<div class="multi-modal__table">\n          <div class="multi-modal__table-cell">\n            <div class="modal '+this.className+' js-modal">\n              '+this.HTMLCloseButton+"\n              "+this.HTMLHeader+"\n              "+this.HTMLMain+"\n            </div>\n          </div>\n        </div>"},t.prototype.renderCloseButton=function(){var t="";if(this.props.closeButton||this.props.fullScreen){var s="";"mobile"===this.props.closeButton&&(s="modal__close--mobile"),this.props.fullScreen&&(s="modal__close--fullscreen"),t='<div class="modal__close '+s+' js-modal-close">&times;</div>'}return t},t.prototype.renderHeader=function(){return'<div class="modal__header">\n      '+this.props.title+"\n    </div>"},t.prototype.renderMain=function(){return"<"==this.props.content.substring(0,1)?this.content=this.props.content:this.content="<p>\n        "+this.props.content+"\n      </p>",'<div class="modal__main">\n      <div class="modal__content">\n        '+this.content+"\n      </div>\n      "+this.HTMLActions+"\n    </div>"},t.prototype.renderActions=function(){return this.props.buttons?'<div class="modal__actions">\n      '+this.HTMLButtons+"\n    </div>":""},t.prototype.renderButtons=function(){var t=this,s="";return this.props.buttons&&Object.keys(this.props.buttons).forEach(function(e){var o="",i="modal__button "+t.parseClass(t.props.buttons[e]);t.props.buttons[e].href&&(o='href="'+t.props.buttons[e].href+'"'),t.props.buttons[e].closeOnClick&&(i+=" js-modal-close"),s+='<a role="button" '+o+' class="'+i+'">\n          '+t.props.buttons[e].value+"\n        </a>"}),s},t.prototype.parseClass=function(t){var s="";return t.classList&&(s+=t.classList.join(" ")),t.className&&(t.classList&&(s+=" "),s+=t.className),s.trim()},t}(),MultiModal=function(){function t(t){this.props=t,this.modals=[],this.remote={url:"",data:{}},this.isAnimating=!1,this.props.isIEBrowser=this.getIEBrowser(),this.props.closeButton||(this.props.closeButton="mobile")}return t.prototype["new"]=function(t){var s=this;if(!this.isAnimating){this.isAnimating=!0;var e=$.extend(!0,{},this.props,t);this.modals.length||($(document.documentElement).css("overflow","hidden"),$(document.body).append(this.renderMultiModal()),this.$wrapper=$(".js-modal-wrapper"),this.$backdrop=$(".js-modal-backdrop"),this.$backdrop.click(function(){return s.onBackdropClick()})),e.remote?this.appendRemote(e):this.appendModal(new Modal(e).getJQueryElement(),e)}},t.prototype.appendRemote=function(t){var s=this;this.remote.url=t.remote,this.remote.data={},"object"==typeof t.remote&&(this.remote.url=t.remote.url,this.remote.data=t.remote.data);var e=$.get(this.remote.url,this.remote.data);e.done(function(e){var o=$($.parseHTML('<div class="modal--remote js-modal">\n        '+e+"\n      </div>",null,!0));s.appendModal(o,t)}),e.fail(function(t){if(404===t.status)throw new Error("MultiModal::FileNotFound: "+this.remote.url);if(500===t.status)throw new Error("MultiModal::InternalServerError: "+this.remote.url)})},t.prototype.appendModal=function(t,s){var e=this;this.modals.push({$wrapper:t,allowBackdropClose:"boolean"==typeof s.allowBackdropClose?s.allowBackdropClose:!0}),this.currentModal=this.modals.length-1,this.$wrapper.append(this.modals[this.currentModal].$wrapper),this.modals[this.currentModal].$modal=$(".js-modal").last(),(s.isIEBrowser||s.remote)&&this.centerModal();var o=new TimelineLite({onComplete:function(){e.isAnimating=!1}});this.animateInNewModal(o),this.animateInOtherModals(o),this.fadeInBackdrop(),s.fullScreen&&this.fadeInFullscreen()},t.prototype.close=function(){var t=this;if(!this.isAnimating){this.isAnimating=!0,1==this.modals.length&&this.$backdrop.removeClass("is-active");var s=new TimelineLite({onComplete:function(){return t.onCloseComplete()}});this.animateOutCurrentModal(s),this.animateOutOtherModals(s)}},t.prototype.closeAll=function(){var t=this;this.$backdrop.removeClass("is-active");var s=new TimelineLite({onComplete:function(){return t.onCloseAllComplete()}});this.animateOutAllModals(s)},t.prototype.onBackdropClick=function(){this.modals[this.currentModal].allowBackdropClose&&this.close()},t.prototype.renderMultiModal=function(){return'<div class="multi-modal__wrapper js-modal-wrapper">\n      <div class="multi-modal__backdrop js-modal-backdrop"></div>\n    </div>'},t.prototype.getIEBrowser=function(){var t=window.navigator.userAgent,s=~t.indexOf("MSIE ")||~t.indexOf("Trident/");return!!s},t.prototype.animateInNewModal=function(t){t.set(this.modals[this.currentModal].$modal,{display:"block",opacity:0,scale:.5}).to(this.modals[this.currentModal].$modal,.5,{opacity:1,scale:1,ease:Power4.easeInOut},"in")},t.prototype.animateInOtherModals=function(t){if(this.modals.length>1)if(this.props.fullScreen)t.to(this.modals[this.currentModal-1].$modal,.5,{scale:"-=.15",opacity:0,ease:Power4.easeInOut},"in");else for(var s in this.modals)parseInt(s)===this.currentModal||parseInt(s)<this.currentModal-4||t.to(this.modals[s].$modal,.5,{y:"-=24",scale:"-=.15",opacity:"-=.25",ease:Power4.easeInOut},"in")},t.prototype.fadeInBackdrop=function(){this.$backdrop.addClass("is-active")},t.prototype.fadeInFullscreen=function(){this.modals[this.currentModal].$wrapper.addClass("is-visible")},t.prototype.centerModal=function(){this.modals[this.currentModal].$modal.css({position:"absolute",left:"50%",top:"50%",marginTop:-(this.modals[this.currentModal].$modal.height()/2),marginLeft:-(this.modals[this.currentModal].$modal.width()/2)})},t.prototype.animateOutCurrentModal=function(t){t.to(this.modals[this.currentModal].$modal,.32,{opacity:0,scale:.5,ease:Power4.easeInOut},"out"),this.props.fullScreen&&this.modals[this.currentModal].$wrapper.removeClass("is-visible")},t.prototype.animateOutOtherModals=function(t){if(this.modals.length>1)if(this.props.fullScreen)t.to(this.modals[this.currentModal-1].$modal,.5,{scale:"+=.15",opacity:1,ease:Power4.easeInOut},"out");else for(var s in this.modals)parseInt(s)===this.currentModal||parseInt(s)<this.currentModal-4||t.to(this.modals[s].$modal,.5,{y:"+=24",scale:"+=.15",opacity:"+=.25",ease:Power4.easeInOut},"out")},t.prototype.animateOutAllModals=function(t){for(var s in this.modals)parseInt(s)>this.currentModal-4&&t.to(this.modals[s].$modal,.5,{opacity:0,scale:"-=.5",ease:Power4.easeInOut},"out");if(this.props.fullScreen)for(var s in this.modals)this.modals[s].$wrapper.removeClass("is-visible")},t.prototype.onCloseComplete=function(){this.props.isIEBrowser?this.modals[this.currentModal].$modal.remove():this.modals[this.currentModal].$wrapper.remove(),this.modals.splice(this.currentModal,1),this.currentModal=this.currentModal-1,this.modals.length||($(document.documentElement).css("overflow",""),this.$wrapper.remove()),this.isAnimating=!1},t.prototype.onCloseAllComplete=function(){this.props.isIEBrowser?$(".js-modal").remove():$(".js-modal-wrapper").remove(),this.modals=[],this.currentModal=-1,$(document.documentElement).css("overflow",""),this.$wrapper.remove(),this.isAnimating=!1},t}();